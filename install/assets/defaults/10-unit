#!/command/with-contenv bash

UNIT_APPLICATION_NAME=${UNIT_APPLICATION_NAME:-"Unit"}
UNIT_DISCARD_UNSAFE_FIELDS=${UNIT_DISCARD_UNSAFE_FIELDS:-"TRUE"}
UNIT_ENABLE_APPLICATION_CONFIGURATION=${UNIT_ENABLE_APPLICATION_CONFIGURATION:-"TRUE"}
UNIT_ENABLE_CREATE_SAMPLE_HTML=${UNIT_ENABLE_CREATE_SAMPLE_HTML:-"TRUE"}
UNIT_ENABLE_SERVER_VERSION=${ENABLE_SERVER_VERSION:-"TRUE"}
UNIT_FORCE_RESET_PERMISSIONS=${UNIT_FORCE_RESET_PERMISSIONS:-"TRUE"}
UNIT_LISTEN_PORT=${UNIT_LISTEN_PORT:-"80"}
UNIT_LOG_FILE=${UNIT_LOG_FILE:-"unit.log"}
UNIT_LOG_FORMAT=${UNIT_LOG_FORMAT:-"STANDARD"}
UNIT_LOG_TYPE=${UNIT_LOG_TYPE:-"FILE"}
UNIT_LOG_PATH=${UNIT_LOG_PATH:-"/var/log/unit/"}
UNIT_LOG_ROUTES=${UNIT_LOG_ROUTES:-"FALSE"}
UNIT_MAX_BODY_SIZE=${UNIT_MAX_BODY_SIZE:-"8388608"}
UNIT_TIMEOUT_BODY_READ=${UNIT_TIMEOUT_BODY_READ:-"30"}
UNIT_TIMEOUT_BODY_SEND=${UNIT_TIMEOUT_BODY_SEND:-"30"}
UNIT_TIMEOUT_HEADER_READ=${UNIT_TIMEOUT_HEADER_READ:-"30"}
UNIT_TIMEOUT_IDLE=${UNIT_TIMEOUT_IDLE:-"30"}
UNIT_WEBROOT=${UNIT_WEBROOT:-"/www/root/"}
UNIT_LISTEN_IP=${UNIT_LISTEN_IP:-"0.0.0.0"}
UNIT_CONTROL_TYPE=${UNIT_CONTROL_TYPE:-"SOCKET"}
UNIT_CONTROL_SOCKET_NAME=${UNIT_CONTROL_SOCKET_NAME:-"control.unit.sock"}
UNIT_CONTROL_SOCKET_PATH=${UNIT_CONTROL_SOCKET_PATH:-"/run/"}
UNIT_CONTROL_IP=${UNIT_CONTROL_IP:-"127.0.0.1"}
UNIT_CONTROL_PORT=${UNIT_CONTROL_PORT:-"8080"}
UNIT_TMP_PATH=${UNIT_TMP_PATH:-"/tmp"}
UNIT_STATE_PATH=${UNIT_STATE_PATH:-"/var/lib/unit/"}
UNIT_MODULE_PATH=${UNIT_MODULE_PATH:-"/usr/lib/unit/modules/"}

case "${UNIT_CONTROL_TYPE,,}" in
    ip)
        _unit_control="${UNIT_CONTROL_IP}:${UNIT_CONTROL_PORT}"
    ;;
    socket)
        _unit_control="unix:/${UNIT_CONTROL_SOCKET_PATH}/${UNIT_CONTROL_SOCKET_NAME}"
    ;;
esac

case "${UNIT_LOG_TYPE,,}" in
    console)
        SHOW_OUTPUT=TRUE
    ;;
    file)
        _unit_log="--log ${UNIT_LOG_PATH}/${UNIT_LOG_FILE}"
    ;;
esac